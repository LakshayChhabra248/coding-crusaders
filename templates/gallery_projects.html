{% extends 'base.html' %}
{% load static %}

{% block content %}
  <section class="section">
    <div class="container">
      <h2>Project Galleries</h2>
      <p class="lead">Images organized per-project. Click a thumbnail to open the lightbox.</p>

      <div class="gallery-index">
        {% for project in projects %}
          <div class="gallery-section glass" style="padding:18px;margin-bottom:18px;border-radius:12px">
            <h3 style="margin:6px 0">{{ project.title }}</h3>
            <p style="margin:6px 0 12px;opacity:0.9">{{ project.description|truncatechars:200 }}</p>
            <div class="gallery-grid">
              {% for img in project.images.all %}
                <div class="gallery-item">
                  <a class="gallery-link" href="{{ img.image.url }}" data-caption="{{ img.caption }}">
                    <img data-src="{{ img.image.url }}" alt="{{ img.caption }}" class="gallery-preview" />
                  </a>
                </div>
              {% empty %}
                <div class="card">No images for this project yet.</div>
              {% endfor %}
            </div>
            <div style="margin-top:10px"><a class="btn ghost" href="{% url 'main:projects' %}">Back to Projects</a></div>
          </div>
        {% empty %}
          <div class="card">No projects found.</div>
        {% endfor %}
      </div>
    </div>
  </section>
{% endblock %}
